<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Venus GX - SSL certifcate note</title>

<script type="text/javascript">

function qs(key)
{
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for (var i = 0; i < hashes.length; i++) {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars[key];
}

function httpsUrl()
{
    var page = qs("page");
    var url = 'https://' + window.location.hostname + (page ? page: '/');
    return url;
}

function checkOnLoad()
{
    var page = qs("page");
    if (page && page.startsWith("/app")) {
        div = document.getElementById("mfd_note");
        div.style.display = "block";
    }
}

</script>

</head>
<body onload="checkOnLoad();">
    <script src="browser_detection.js"></script>
    <div class="outer_container explanation">
        <img src="victron_logo.png" alt="Victron logo" class="victron_logo">
        <div class="inner_container explanation">
            <img src="info_icon.png" alt="Info icon" class="info_icon">
            <h3 class="header">Note before you continue</h3>
            <div class="note_body">
                <p>Connecting to your GX device locally uses self-signed SSL, causing browsers to flag it as untrusted.
                    This happens because valid SSL certificates can't be issued for LAN addresses.
                </p>
                <p>
                   Please accept the warning to proceed - your browser will remember your choice.
                </p>
                <div id="mfd_note" style="display:none">
                  <BR>
                  <h3 class="header">Marine MFD app</h3>
                  <p>
                     Multi functional displays might not support a secure connection.
                     To make the Victron app work on such a display, change this setting on the Victron GX device (and not on this MFD):<BR>
                     'Settings&nbsp;>&nbsp;General&nbsp;>&nbsp;Network&nbsp;Security&nbsp;Level' to 'Insecure'.
                  </p>
                </div>
                <div class="browser_instructions">
                    <h4 id="browser_heading"></h4>
                    <ol id="browser_instructions">
                    </ol>
                </div>
            </div>

            <button class="continue" onclick="window.location.href = httpsUrl();">Continue</button>
        </div>
    </div>
</body>
</html>
